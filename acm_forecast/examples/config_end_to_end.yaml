name: "azure_cost_forecasting_e2e"

# Data Source Configuration
data:
  delta_table_path: "azure_cost_db.cost_data"
  database_name: "azure_cost_db"
  table_name: "cost_data"
  min_historical_months: 6
  max_forecast_horizon: 3
  cost_categories: ["Total", "Compute", "Storage"]
  region_weights:
    eastus: 1.2
    westus: 1.0
    centralus: 0.8
  
  # Sample data generation (if delta table doesn't exist)
  generate_sample_data: true
  sample_data_days: 365
  sample_data_records_per_day: 100
  sample_data_subscriptions: 5
  sample_data_start_date: "2023-01-01"

# Model Configuration
model:
  selected_model: "prophet"  # Options: prophet, arima, xgboost (if xgboost plugin is available)
  prophet:
    yearly_seasonality: true
    weekly_seasonality: true
    daily_seasonality: false
    seasonality_mode: "additive"
    changepoint_prior_scale: 0.05
    holidays_prior_scale: 10.0
    uncertainty_samples: 500
  arima:
    order: [5, 1, 0]
    seasonal_order: [1, 1, 0, 12]
    suppress_warnings: true
    stepwise: true
    information_criterion: "aic"
  xgboost:
    n_estimators: 100
    learning_rate: 0.1
    max_depth: 6
    subsample: 0.8
    colsample_bytree: 0.8

# Training Configuration
training:
  train_split: 0.7
  validation_split: 0.15
  test_split: 0.15

# Feature Engineering Configuration
feature:
  date_column: "usage_date"
  target_column: "cost_in_billing_currency"
  categorical_features: ["meter_category", "resource_location", "plan_name"]
  numerical_features: ["quantity", "effective_price"]
  time_features: ["day_of_week", "day_of_month", "month", "quarter", "year"]
  lag_features: [7, 14, 28]
  rolling_features:
    window_sizes: [7, 14, 28]
    aggregations: ["mean", "std"]

# Performance Metrics Configuration
performance:
  metrics: ["mae", "rmse", "mape", "r2"]
  mape_threshold: 10.0
  r2_threshold: 0.7

# Model Registry Configuration
registry:
  model_name: "acm_forecast_model"
  model_version_stage: "Staging"
  mlflow_experiment_name: "acm_forecast_e2e"
  mlflow_tracking_uri: "file:///tmp/mlruns"

# Monitoring Configuration
monitoring:
  data_drift_threshold: 0.1
  model_drift_threshold: 0.05
  retraining_interval_days: 30

# Forecast Configuration
forecast:
  forecast_horizons_days: [30, 60, 90]  # Multiple horizons supported
  daily_forecasts: true
  weekly_forecasts: true
  monthly_forecasts: true

# MLflow Configuration
mlflow:
  tracking_uri: "file:///tmp/mlruns"
  experiment_name: "acm_forecast_e2e"

# Plugin Configuration
plugins:
  data_source:
    name: "delta"
    config: {}
  data_quality:
    name: "default"
    config: {}
  data_preparation:
    name: "default"
    config: {}
  feature_engineer:
    name: "default"
    config: {}
  model:
    name: "prophet"  # Will use model.selected_model if not specified
    config: {}
  forecaster:
    name: "default"
    config: {}
  model_registry:
    name: "mlflow"
    config: {}

